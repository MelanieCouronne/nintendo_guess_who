<div class="wrapper-background">
  <div class="wrapper-parent">
    <% if @game.round_count == 0 %>
      <h1 class="text-center p-3 mb-4">First round!</h1>
    <% else %>
      <h1 class="text-center p-3 mb-4">Round nÂ°<%= @game.round_count + 1 %></h1>
    <% end %>

    <%# Questions for small devices start here %>

    <div id="question-for-sm-device" class="card-white text-center p-3">
      <h4 class="my-3">Choose a question</h4>

      <%# Form %>
      <%= simple_form_for([@game, @round]) do |f| %>
        <div class="">
          <%= f.input :user_question, collection: @questions, label: false, prompt: "", input_html: { data: { controller: 'select2' }, class: 'card-question js-example-placeholder-single' }, label_method: :title, include_blank: false %>
        </div>
        <%= f.button :submit, "Submit your question!", class: 'btn-arcade-green mt-4 mb-5'%>
      <% end %>
      <div class="separator-top-gray"></div>
      <div class="card-product mt-3">
        <%= image_tag "mystery-block.gif", alt: "Mario mystery block" %>
        <div class="card-product-infos">
          <h2>Your last question was:</h2>
          <% if @game.rounds.any? %>
            <p><%= @game.rounds.last.user_question.question.title %></p>
            <% if @game.computer_character.computer_characteristics.include?(@game.rounds.last.user_question.question.id) %>
              <p>Answer: This is true!</p>
            <% else %>
              <p>Answer: Sorry that's false.</p>
            <% end %>
          <% else %>
            <p>Waiting for your first question.</p>
          <% end %>

        </div>
      </div>
    </div>

    <%# Questions end here %>

    <div class="d-flex justify-content-center">
      <div id="player-dashboard">
        <h4 class="text-center p-4 mb-2 mt-4">Your dashboard</h4>
        <div id="player-cards" class="parent-round">
          <% @characters.each do |character| %>
            <div class="box">
              <% if @game.user_rejected_characters.include?(character.id) %>
                <div class="text-center">
                  <div class="box-inner">
                    <div class="box-back">
                      <div class="card-rounded-back">
                        <i class="fa-regular fa-block-question"></i>
                      </div>
                    </div>
                  </div>
                </div>
              <% else %>
                <div class="text-center">
                  <div class="">
                    <div class="">
                      <%= image_tag(character.image_url, class: "card-rounded-round", value: character.id, name: character.character_name, id: character.id) %>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
        <span class='d-none btn btn-danger mt-4 ms-5 mb-5' data-bs-toggle="modal" data-bs-target="#guesswhoModal">Guess Who!</span>
        <%= render 'modal' %>

        <%# Questions for tablet and computer start here %>

        <div id="question-for-md-device" class="card-white text-center p-3 d-none">
          <h4 class="my-3">Choose a question</h4>

          <%# Form %>
          <%= simple_form_for([@game, @round]) do |f| %>
            <div class="">
              <%= f.input :user_question, collection: @questions, label: false, prompt: "Please, select a question", input_html: { data: { controller: 'select2' }, class: 'card-question' }, label_method: :title, include_blank: false %>
            </div>
            <%= f.button :submit, "Submit your question!", class: 'btn-arcade-green mt-4 mb-5'%>
          <% end %>

          <div class="separator-top-gray"></div>
          <div class="card-product mt-3">
            <%= image_tag "mystery-block.gif", alt: "Mario mystery block" %>
            <div class="card-product-infos">
              <h2>Your last question was:</h2>
              <% if @game.rounds.any? %>
                <p><%= @game.rounds.last.user_question.question.title %></p>
                <% if @game.computer_character.computer_characteristics.include?(@game.rounds.last.user_question.question.id) %>
                  <p>Answer: This is true!</p>
                <% else %>
                  <p>Answer: Sorry that's false.</p>
                <% end %>
              <% else %>
                <p>Waiting for your first question.</p>
              <% end %>

            </div>
          </div>
        </div>

        <%# Questions end here %>

      </div>
      <div id="computer-dashboard" class="ms-5">
        <h2 class="text-center p-4 mb-3">Computer's dashboard</h2>
        <div id="computer-cards" class="parent-round-computer">
          <% @characters.each do |character| %>
            <div class="box-computer">
              <% if @game.computer_rejected_characters.include?(character.id) %>
                <div class="text-center">
                  <div class="box-inner">
                    <div class="box-back">
                      <div class="card-rounded-back-computer">
                        <i class="fa-regular fa-block-question"></i>
                      </div>
                    </div>
                  </div>
                  <p><%= character.character_name  %></p>
                </div>
              <% else %>
                <div class="text-center">
                  <div class="">
                    <div class="">
                      <%= image_tag(character.image_url, class: "card-rounded-xxs", value: character.id, name: character.character_name, id: character.id) %>
                    </div>
                  </div>
                  <p><%= character.character_name  %></p>
                </div>
              <% end %>
            </div>

          <% end %>
        </div>
        <div class="text-center p-3">
          <h4 class="mt-4">Computer's question</h4>
          <div class="card-product">
            <div class="card-product-infos">
              <h2>Previous question/answer</h2>
              <% if @game.rounds.any? %>
                <p>Question: <%= @game.rounds.last.computer_question.question.title %></p>
                <% if @game.user_character.user_characteristics.include?(@game.rounds.last.computer_question.question.id) %>
                  <p>Answer: this is true!</p>
                <% else %>
                  <p>Answer: sorry that's false!</p>
                <% end %>
              <% else %>
                <p>No question yet!</p>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
